<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Elegant Compass Pointer - Enhanced Animation</title>
  <style>
    /* ------------------------------------------------
       Basic Page Reset & Styling
    ------------------------------------------------ */
    body {
      margin: 0;
      padding: 0;
      background: #ffffff;
      min-height: 200vh; /* Extra height for testing scrolling/responsiveness */
      cursor: none; /* Oculta el cursor por defecto */
    }

    /* ------------------------------------------------
       Compass Pointer Container
       - Posicionado de forma fija para seguir el cursor.
       - pointer-events deshabilitado para no interferir con clics.
       - Inicialmente oculto hasta detectar movimiento.
    ------------------------------------------------ */
    #compass-pointer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100px;   /* Tamaño total del pointer */
      height: 100px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 1000;
    }

    /* ------------------------------------------------
       Estilo Monocromático para todos los elementos
       Se usa el mismo color (#2c3e50) para mantener la sobriedad.
    ------------------------------------------------ */
    .arrow,
    .center-dot,
    .outher-dot {
      fill: #2c3e50;
      stroke: #2c3e50;
    }
    /* Las flechas se muestran rellenas; los “outer dots” se muestran solo con trazo */
    .outher-dot {
      fill: none;
      stroke-width: 1;
    }

    /* ------------------------------------------------
       Contenedores de las flechas
       - Cada flecha se envuelve en un contenedor para permitir escalado independiente al hacer hover.
       - El transform-origin se establece en el centro para mantener la simetría.
    ------------------------------------------------ */
    .arrow-container {
      transform-origin: center;
      transition: transform 0.5s cubic-bezier(0.22, 1, 0.36, 1);
    }

    /* ------------------------------------------------
       Animación de los Outer Dots
       - Se definen dos círculos que cambian de forma (de círculo a elipse) mediante escalados en X e Y.
       - La animación se ejecuta de forma constante con un efecto “sinusoidal” simulado mediante keyframes.
    ------------------------------------------------ */
    @keyframes ellipsePulse {
      0%   { transform: scaleX(1.3) scaleY(.5); }
      50%  { transform: scaleX(.5) scaleY(1.3); }
      100% { transform: scaleX(1.3) scaleY(.5); }
    }

    .outher-dot {
      animation: ellipsePulse 3s cubic-bezier(0.22, 1, 0.36, 1) infinite;
    }

    /* Desfasar la animación del segundo círculo para mayor dinamismo */
    .dot2 {
      animation-delay: 1.5s;
    }

    .dot3 {
      animation-delay: 2.2s;
    }

    .dot4 {
      animation-delay: 6.23s;
    }

    /* ------------------------------------------------
       Hover Effects
       - Al pasar el mouse sobre elementos clicables, se encogen las flechas.
       - Además, se pausa la animación de los outer dots y éstos se escalan a un estado fijo.
    ------------------------------------------------ */
    #compass-pointer.hover .arrow-container {
      transform: scale(0.7);
      
    }
    #compass-pointer.hover .outher-dot {
      animation-play-state: paused;
      transform: scale(0.7);
    }
  </style>
</head>
<body>
  <!-- ------------------------------------------------
       Elementos clicables de ejemplo para demostrar el efecto hover
  ------------------------------------------------ -->
  <div style="margin: 50px;">
    <a href="#" style="padding: 10px; background: #e0e0e0; text-decoration: none; color: #2c3e50;">Link</a>
    <button style="margin-left: 20px; padding: 10px;">Button</button>
  </div>

  <!-- ------------------------------------------------
       Compass Pointer SVG
       - viewBox de "0 0 100 100".
       - El grupo <g id="pointer-group"> centra la gráfica en (50,50).
       - Se definen 4 grupos de flechas (triángulos puntiagudos) y un punto central.
       - Se agregan dos “outer dots” que animan de forma constante.
  ------------------------------------------------ -->
  <svg id="compass-pointer" viewBox="0 0 100 100">
    <!-- Centramos todos los elementos en (50,50) -->
    <g id="pointer-group" transform="translate(50,50)">
      <!-- Flechas en 4 direcciones -->
      <g class="arrow-group" transform="rotate(0)">
        <g class="arrow-container">
          <polygon class="arrow" points="0,-40 -5,0 5,0" />
        </g>
      </g>
      <g class="arrow-group" transform="rotate(90)">
        <g class="arrow-container">
          <polygon class="arrow" points="0,-40 -5,0 5,0" />
        </g>
      </g>
      <g class="arrow-group" transform="rotate(180)">
        <g class="arrow-container">
          <polygon class="arrow" points="0,-40 -5,0 5,0" />
        </g>
      </g>
      <g class="arrow-group" transform="rotate(270)">
        <g class="arrow-container">
          <polygon class="arrow" points="0,-40 -5,0 5,0" />
        </g>
      </g>
      <!-- Punto central -->
      <circle class="center-dot" cx="0" cy="0" r="2" />
      <!-- Outer Dots: dos círculos que animan cambiando de forma -->
      <g class="outer-dots">
        <circle class="outher-dot dot1" cx="0" cy="0" r="20" />
        <circle class="outher-dot dot2" cx="0" cy="0" r="20" />
        <circle class="outher-dot dot3" cx="0" cy="0" r="20" />
        <circle class="outher-dot dot4" cx="0" cy="0" r="20" />
      </g>
    </g>
  </svg>

  <!-- ------------------------------------------------
       JavaScript: Seguimiento suave del cursor & detección de hover
       - El pointer sigue el cursor con un easing suave.
       - Se muestra al detectar movimiento y se oculta tras inactividad.
       - Cuando se hace hover sobre elementos clicables (links, botones, etc.), se agrega la clase "hover" para activar los efectos.
  ------------------------------------------------ -->
  <script>
    // Referencia al elemento pointer
    const pointer = document.getElementById('compass-pointer');

    // Posiciones objetivo e inicial (comenzamos centrados)
    let targetX = window.innerWidth / 2;
    let targetY = window.innerHeight / 2;
    let currentX = targetX;
    let currentY = targetY;

    // Factor de easing
    const easing = 0.15;

    // Variables para la visibilidad y el timer de ocultamiento
    let pointerVisible = false;
    let hideTimeout;

    // Actualiza la posición objetivo en cada movimiento del mouse
    document.addEventListener('mousemove', (e) => {
      targetX = e.clientX;
      targetY = e.clientY;

      // Muestra el pointer si aún no es visible
      if (!pointerVisible) {
        pointer.style.opacity = 1;
        pointerVisible = true;
      }

      // Reinicia el timer de ocultamiento (1.5 seg de inactividad)
      clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => {
        pointer.style.opacity = 0;
        pointerVisible = false;
      }, 1500);
    });

    // Bucle de animación para interpolar suavemente la posición
    function animatePointer() {
      const dx = targetX - currentX;
      const dy = targetY - currentY;
      currentX += dx * easing;
      currentY += dy * easing;

      // Centra el pointer (su tamaño es 100px x 100px)
      pointer.style.transform = `translate(${currentX - 50}px, ${currentY - 50}px)`;
      requestAnimationFrame(animatePointer);
    }
    animatePointer();

    // ------------------------------------------------
    // Hover Effects: Cuando se pasa el mouse sobre elementos clicables,
    // se agrega/quita la clase "hover" en el pointer para encoger flechas y pausar animación de outer dots.
    // ------------------------------------------------
    const clickableElements = document.querySelectorAll('a, button, .clickable');
    clickableElements.forEach(elem => {
      elem.addEventListener('mouseenter', () => {
        pointer.classList.add('hover');
      });
      elem.addEventListener('mouseleave', () => {
        pointer.classList.remove('hover');
      });
    });

    // Ajustes en resize (opcional)
    window.addEventListener('resize', () => {
      // La solución es naturalmente responsive; se pueden agregar ajustes si se requieren.
    });
  </script>
</body>
</html>
